# ChangeLog

**2025.10.20 - v2.6.0**

> 移除多余导入，减小打包体积。移除 CSS 安装方式，仅保留 JavaScript 安装方式。

**2025.10.20 - v2.5.3**

> 正确提升了样式的注入时机。

**2025.10.19 - v2.5.2**

> 将样式注入从 head 最开始移动到了 body 最开始，减轻了页面闪烁的问题。

**2025.10.19 - v2.5.1**

> 完成 Faq 页面的样式适配。

**2025.10.19 - v2.5.0**

> 完善选课网的样式。

**2025.10.18 - v2.4.3**

> 对 `main.js` 的结构进行了抽离优化，并尝试了支持选课网（未启用，等到选课时验证后启用）。

**2025.10.18 - v2.4.2**

> 新增了对于课程小组、口语训练页面的适配。

**2025.10.17 - v2.4.1**

> 修复了不知道怎么出来的 `.risktracker` 学习行为管理中心按钮没有正确隐藏的问题。

**2025.10.17 - v2.4.0**

> 新增了对于课程日历页面的适配，「晨钟暮鼓」 。

**2025.10.16 - v2.3.74**

> 更新文档和 Safari 相关说明。

**2025.10.16 - v2.3.73**

> 修复了原先 iframe 内部没能正确穿透日夜模式切换 event，导致无法立即响应的问题。

**2025.10.16 - v2.3.72**

> 修复了黑夜模式下一些 CSS 变量没有正确设置的问题。

**2025.10.15 - v2.3.71**

> 添加了下载链接，正确更新。

**2025.10.15 - v2.3.70**

> 将主题切换从脚本选项改为了全局导航栏的按钮，提高用户体验。

**2025.10.15 - v2.3.69**

> 稍微重构了一下屎山代码，另外更正了妙妙小工具导致的布局问题。

**2025.10.14 - v2.3.68**

> 添加了妙妙小工具。

**2025.06.20 - v2.3.67**

> 支持在 Tampermonkey 的用户脚本设置中切换主题模式、外链直接跳转。
>
> 修复了一些小的样式问题。

**2025.05.12 - v2.3.66**

> close #24

**2025.04.26 - v2.3.65**

> 修复了 iaaa 登录页面背景色的问题。

**2025.03.16 - v2.3.64**

> 修复了 Safari 下 Favicon 没有成功替换的问题。

**2025.03.16 - v2.3.63**

> 添加了侧栏的作者信息。

**2025.03.15 - v2.3.62**

> Merged #23, thx @dfshfghj, 适配了教参页面。

**2025.03.15 - v2.3.61**

> 继续适配答疑讨论页面。

**2025.03.15 - v2.3.60**

> 适配答疑讨论页面。

**2025.03.15 - v2.3.59**

> Merged #22, thx @dfshfghj, 修复了作业提交页面评论区 tinymce 的颜色问题，fix #8

**2025.03.13 - v2.3.58**

> 更新依赖。
>
> 修复了 Safari 相关的一些提示信息样式问题。

**2025.03.08 - v2.3.57**

> 修改了下载录播界面的按钮背景色。

**2024.12.25 - v2.3.56**

> 修复了课程主页的导航弹窗行内样式导致的背景溢出问题。

**2024.12.01 - v2.3.55**

> Merged #18，thx @djdjz7，让通知 badge 直接展示在顶层图标右上角。

**2024.11.24 - v2.3.54**

> 由于存在加载问题，回退上一个版本的更改

**2024.11.24 - v2.3.53**

> 对全局 CSS 样式进行了一些优化，添加了过渡效果。

**2024.10.06 - v2.3.52**

> 做了一些对于助教视角下页面的修改（可能导致某些功能不可用，暂不计划支持助教视角的全部功能）。

**2024.10.06 - v2.3.51**

> 由于可以直接点击 Logo 回到主页，所以移除 “我的主页” 按钮。

**2024.10.03 - v2.3.50**

> 添加了点击 logo 直接返回课程首页的功能。

**2024.09.17 - v2.3.49**

> 修改了下载区域的样式，强迫症狂喜。

**2024.08.18 - v2.3.48**

> 修改了文件页面的标题栏样式，在注入时额外附加了两个字段。

**2024.06.18 - v2.3.47**

> 修改了复制下载链接的逻辑，现在复制的是可以直接在浏览器中打开触发 mp4 下载的链接。

**2024.06.06 - v2.3.46**

> 适配教学网视频接口修改，移除乱码文件名获取（现接口不再返回此数据）。

**2024.04.27 - v2.3.45**

> Merged #13，增加了基于指数平滑的下载时间估计

**2024.04.19 - v2.3.44**

> 适配教学网视频接口修改，修复上一版本无法下载的问题。

**2024.04.07 - v2.3.43**

> 支持替换 disk.pku.edu.cn 的图标。

**2024.04.04 - v2.3.42**

> 修复了近期下载路径变化导致某些视频无法下载的问题。

**2024.04.03 - v2.3.41**

> 移除了下载时的打印。

**2024.03.26 - v2.3.40**

> 将上一个版本的修复复制到了 `courseClassGrade` 页面，修复了这个页面的样式问题。

**2024.03.26 - v2.3.39**

> merged #12，fixed [#9](https://github.com/zhuozhiyongde/PKU-Art/issues/9)

**2024.03.25 - v2.3.38**

> 让首页的课程 a 标签宽度范围大了一些，方便点击。
>
> 修复了固定导航栏后，背景错误的问题。
>
> 美化了下载选择框的样式，更改了 GM API，更加稳定。

**2024.03.25 - v2.3.37**

> 修正了更改打包方式之后导致的作者信息丢失问题。

**2024.03.25 - v2.3.36**

> 固定了顶部和左侧导航栏的位置，使得在滚动时不会消失。

**2024.03.25 - v2.3.35**

> 添加了下载时的进度提示。

**2024.03.23 - v2.3.34**

> 接受了来自 @wjsoj 的 PR，并对之进行更改，现在已经可以在课程页面中直接下载 mp4 格式的录播了。

**2024.03.07 - v2.3.33**

> 参照 https://leohlee.github.io/pkuVideo.html 的代码，修改了录播下载页面的代码，使得可以直接下载 mp4 格式的录播。
>
> 修正了 `main.css` 和 `arco-palette.css` 注入时机匹配失败的问题。

**2024.02.24 - v2.3.32**

> 修复了回放页面 URL 变动的问题。

**2023.12.02 - v2.3.31**

> 修改了 `replaceIcon()` 的选择范围。

**2023.11.28 - v2.3.30**

> 添加了作者信息，移除了无效引用，更新了 CDN Header。

**2023.11.15 - v2.3.29**

> 增加了对于单独文件附件的 CSS 样式的动画。

**2023.11.15 - v2.3.28**

> 优化了替换 ICON 的逻辑。

**2023.11.15 - v2.3.27**

> 修改了上一个版本中选择范围的错误，略微优化了一下样式。

**2023.11.15 - v2.3.26**

> 增加了对于单独文件附件的 CSS 样式。

**2023.10.28 - v2.3.25**

> 修复了全局导航栏判定过宽影响退出的问题。

**2023.09.03 - v2.3.24**

> 修复了一些小的问题。

**2023.09.03 - v2.3.23**

> 改正了 `ReplaceIcon()` 的逻辑，使得对于附件页面也可以生效了。

**2023.09.03 - v2.3.22**

> 修改了 README 的病句。

**2023.06.05 - v2.3.21**

> 将原有的 PKU_Logo 图片从 PNG 格式切换到了 SVG 格式，以提高图片质量，降低请求大小。

**2023.05.14 - v2.3.20**

> 修复了一个 `courseGlobalPage.css` 的宽度样式问题。

**2023.04.27 - v2.3.19**

> 添加了一些对于 courseBlankPage 的字体颜色样式的更改。
>
> 类似的，修复了一个 `courseAnnouncement.css` 的字体颜色样式更改的选择器问题。

**2023.04.08 - v2.3.18**

> 修复了 `deleteCourseSerial()` 函数对于某些课程无法正常工作的问题。closed #7

**2023.04.01 - v2.3.17**

> 修复了因为 `min-height:100vh` 带来的过高显示问题。
>
> 修复了文件上传区、通知说明区文本下划线选择范围过宽的问题。
>
> 修复了替换课程序号功能在某些情况下不可用的问题。

**2023.04.01 - v2.3.16**

> 意识到现在的 IIFE 写法有可能污染所有 pku.edu.cn 的网站。已增加限制作用域。
>
> 更正了一些打印格式。

**2023.04.01 - v2.3.15**

> 完蛋了 以后一定发布前先自己测试一下。
>
> 发现闪烁问题，已修复。

**2023.04.01 - v2.3.14**

> 草 忘了作用域问题了，修复一下。

**2023.04.01 - v2.3.13**

> 添加了 `deleteCourseSerial()` 函数，用于删除课程序号。
>
> 这意味着你不用修读这些课程了。
>
> 愚人节快乐！

**2023.03.31 - v2.3.12**

> 美化了通知、成绩界面的新项目。
>
> 美化了成绩上传页面的一些元素。
>
> 美化了滚动条。

**2023.03.31 - v2.3.11**

> 增加了 `replaceIcon()` 函数，用于替换标签页的图标。
>
> 修复了上传文件悬浮时样式失效的问题。

**2023.03.31 - v2.3.10**

> 更新了脚本的运行时间至 `document-start` ，解决了 JS 加载方式“卡一下”的问题。
>
> ↑ 2.3.9 版本的自动构建脚本没有同时更正，此版本修复了这个问题。

**2023.03.31 - v2.3.9**

> 更新了 `preventHideSidebar()` 的逻辑。
>
> 更新了脚本的运行时间至 `document-start` ，解决了 JS 加载方式“卡一下”的问题。

**2023.03.31 - v2.3.8**

> 所有 2.3.0~2.3.8 的日志和版本都可能是混乱的。
>
> 因为我使用了这些版本以测试自动化发布流程脚本。
>
> 从功能上来讲，这些版本是一致的，不必更新。

**2023.03.30 - v2.3.0**

> 经过分析，一直以来存在的侧边栏收起后（可能是窗口大小改变或者误触 puller）无法重新展开的问题无法简单地通过附加 CSS 样式解决，因此，我在 JavaScript 脚本种引入了新的 IIFE（立即调用表达式），即 `preventHideSidebar()` 函数，它会检测侧栏是否被收起，如果被收起，则在 **页面刷新** 后，帮你自动点击 puller 并展开侧栏。
>
> 上述原因导致 PKU Art 首次出现了 JavaScript 安装和 CSS 安装的差异，所以我建议所有采用 CSS 安装的用户 **改变安装方式** 至 JavaScript 安装。
>
> `custom-builder.py` 现在支持解析 `main.js` 中的 IIFE 表达式，并且自动添加到脚本后。

**2023.02.28 - v2.2.0**

> 修复了一些小的 bug。
>
> 通过更仔细的对比选择器修复了部分小的样式失效问题。
>
> 构建了完整的发布工作流程，并且迁移部署了 CDN 文件发放域名至 https://cdn.arthals.ink/ 下。稍后可能会完全禁用原有途径。

**2023.02.19 - v2.2.0 - dev**

> 状态：开发中，还未构建发布版 css/js。
>
> 简单的用 tampermonkey-vite-plugin 重构了一下，小修了几个明显的显示错误，现在可以直接在本地用 Vite HMR 了，不用手写自动刷新脚本了。
